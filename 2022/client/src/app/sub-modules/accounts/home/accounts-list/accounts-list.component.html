<div class="dash-board customers">
  <fieldset class="search-id-panel">
    <legend><mat-icon>search</mat-icon> Search by ID's</legend>
    <div class="flex-row">
      <div>
        <mat-form-field>
          <mat-label>Account ID</mat-label>
          <span matPrefix>ACT &nbsp;</span>
          <input
            matInput
            placeholder="Enter Account ID"
            id="searchId"
            [(ngModel)]="searchId"
          />
          <mat-icon
            matSuffix
            *ngIf="searchId && searchId.trim()"
            class="clear-ipnut-icon"
            (click)="searchId = ''"
            >close</mat-icon
          >
          <mat-hint>Search by Account ID</mat-hint>
        </mat-form-field>

        <button
          mat-stroked-button
          class="btn-filter"
          color="primary"
          (click)="searchById()"
        >
          <mat-icon>search</mat-icon>
          Search
        </button>
      </div>

      <span class="flex-spacer"></span>

      <div>
        <mat-form-field>
          <mat-label>Customer ID</mat-label>
          <span matPrefix>CST &nbsp;</span>
          <input
            matInput
            placeholder="Enter Customer ID"
            [(ngModel)]="filterParams.CustId"
            (change)="filterParams.CustName = ''"
          />
          <mat-icon
            matSuffix
            *ngIf="filterParams.CustId && filterParams.CustId.trim()"
            class="clear-ipnut-icon"
            (click)="filterParams.CustId = ''"
            >close</mat-icon
          >
          <mat-hint>Search by Customer ID</mat-hint>
        </mat-form-field>

        <button mat-stroked-button class="btn-filter" color="primary">
          <mat-icon>search</mat-icon>
          Search
        </button>
      </div>
    </div>
  </fieldset>

  <fieldset class="filter-panel">
    <legend><mat-icon>filter_alt</mat-icon> Filters Orders</legend>
    <mat-form-field appearance="outline">
      <mat-label>Customer Name</mat-label>
      <input
        matInput
        placeholder="Enter Customer Name"
        id="CustName"
        [(ngModel)]="filterParams.CustName"
        (change)="filterParams.CustId = ''"
      />
      <mat-icon
        matSuffix
        *ngIf="filterParams.CustName && filterParams.CustName.trim()"
        class="clear-ipnut-icon"
        (click)="filterParams.CustName = ''"
        >close</mat-icon
      >
      <mat-hint>Search by Customer Name</mat-hint>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>City</mat-label>
      <mat-select [(value)]="filterParams.City">
        <mat-option value="">All cities</mat-option>
        <mat-option value="1">Kandy</mat-option>
        <mat-option value="2">Akurana</mat-option>
        <mat-option value="3">Gampola</mat-option>
      </mat-select>
      <mat-hint>Set the Customer City</mat-hint>
    </mat-form-field>

    <div>
      <mat-checkbox color="primary" [(ngModel)]="filterParams.IncludeDeleted"
        >Include Deleted Customers</mat-checkbox
      >
    </div>

    <div class="inline-flex-right footer">
      <button
        mat-stroked-button
        class="btn-reset"
        color="primary"
        (click)="restFilter()"
      >
        Reset
      </button>
      <button
        mat-stroked-button
        class="btn-filter"
        color="primary"
        (click)="filter()"
      >
        Filter
      </button>
    </div>
  </fieldset>

  <div class="dashboard-content-wrap">
    <div class="header">
      <div class="flex-row">
        <div class="flex-col">
          <div class="header-text">
            Showing the list of Customer Accounts summary
          </div>
          <small>
            You can view (<mat-icon> remove_red_eye </mat-icon>) the Order
          </small>
        </div>
        <span class="flex-spacer"></span>
        <div>
          <button
            mat-flat-button
            color="primary"
            routerLink="/admin/customers/new"
          >
            Add New Customer
          </button>
        </div>
      </div>
    </div>

    <div class="list dashboard-table-wrap">
      <table mat-table [dataSource]="dataSource">
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef>ACC ID</th>
          <td mat-cell *matCellDef="let element">
            <a [routerLink]="element.Id">ACT{{ element.Id }}</a>
          </td>
        </ng-container>

        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>Customer Name</th>
          <td mat-cell *matCellDef="let element">{{ element.customerName }}</td>
        </ng-container>

        <ng-container matColumnDef="city">
          <th mat-header-cell *matHeaderCellDef>City</th>
          <td mat-cell *matCellDef="let element">{{ element.city }}</td>
        </ng-container>

        <ng-container matColumnDef="balance">
          <th mat-header-cell *matHeaderCellDef>Balance</th>
          <td mat-cell *matCellDef="let element">
            <span
              class="currency"
              [innerHtml]="element.balance | currencyFormat"
            ></span>
          </td>
        </ng-container>

        <ng-container matColumnDef="lastinvoice">
          <th mat-header-cell *matHeaderCellDef>Last invoice</th>
          <td mat-cell *matCellDef="let element">
            {{ element.lastInvoice | dateFormat }}
          </td>
        </ng-container>

        <ng-container matColumnDef="lastpayment">
          <th mat-header-cell *matHeaderCellDef>Last Payment</th>
          <td mat-cell *matCellDef="let element">
            {{ element.lastPayment | dateFormat }}
          </td>
        </ng-container>

        <ng-container matColumnDef="pendingcheques">
          <th mat-header-cell *matHeaderCellDef>Pending Cheques</th>
          <td mat-cell *matCellDef="let element">
            <span
              class="currency"
              [innerHtml]="element.pendingCheques | currencyFormat"
            ></span>
          </td>
        </ng-container>

        <ng-container matColumnDef="returncheques">
          <th mat-header-cell *matHeaderCellDef>Return cheques</th>
          <td mat-cell *matCellDef="let element">
            <span
              class="currency"
              [innerHtml]="element.returnCheques | currencyFormat"
            ></span>
          </td>
        </ng-container>

        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef>Status</th>
          <td
            mat-cell
            *matCellDef="let element"
            [ngClass]="{ deleted: element.Status == 0 }"
          >
            {{ element.status | entityStatusString }}
          </td>
        </ng-container>

        <ng-container matColumnDef="commands">
          <th mat-header-cell *matHeaderCellDef>Commands</th>
          <td mat-cell *matCellDef="let element" class="commands-column">
            <mat-icon (click)="view(element.Id)"> remove_red_eye </mat-icon>
            <mat-icon routerLink="{{ element.Id + '/edit' }}"> edit </mat-icon>
          </td>
        </ng-container>

        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>

      <mat-paginator
        class="center-paginator"
        [pageSizeOptions]="[10, 15, 20]"
        showFirstLastButtons
      ></mat-paginator>
    </div>
  </div>
</div>
