<div class="dash-board payments">

    <div class="filter-wrap">

        <div class="flex-center add-new">
            <button mat-flat-button color="primary" (click)="new()">New Paymment</button>
        </div>

        <div class="filter-field-wrap">

            <fieldset>
                <legend>Filter/Search Payments</legend>

                <div class="filter-row-wrap">

                    <input type="checkbox" name="" id="">

                    <mat-form-field appearance="outline">
                        <mat-label>Filter by payment ID</mat-label>
                        <input matInput type="text" [(ngModel)]="value">
                        <button mat-button *ngIf="value" matSuffix mat-icon-button aria-label="Clear"
                            (click)="value=''">
                            <mat-icon>close</mat-icon>
                        </button>
                    </mat-form-field>
                </div>

                <div class="filter-row-wrap">

                    <input type="checkbox" name="" id="">

                    <mat-form-field appearance="outline">
                        <mat-label>Filter by Customer name</mat-label>
                        <input matInput type="text" [(ngModel)]="value">
                        <button mat-button *ngIf="value" matSuffix mat-icon-button aria-label="Clear"
                            (click)="value=''">
                            <mat-icon>close</mat-icon>
                        </button>
                    </mat-form-field>
                </div>

                <mat-form-field appearance="outline" class="inline">
                    <mat-label>Payment ID</mat-label>
                    <input matInput placeholder="Enter Pyament ID" id="searchId" [(ngModel)]="searchId">
                    <span matPrefix>PYT</span>
                    <mat-icon matSuffix *ngIf="searchId && searchId.trim()" class="clear-ipnut-icon"
                        (click)="searchId = ''">close</mat-icon>
                    <mat-hint>Search by Payment ID</mat-hint>
                </mat-form-field>
                <button mat-flat-button class="btn-search-by-id" color="primary" (click)="searchById()">Search</button>
            </fieldset>

            <fieldset>
                <legend>Filter Payments</legend>

                <mat-form-field appearance="outline">
                    <mat-label>Customer ID</mat-label>
                    <input matInput placeholder="Enter Customer ID" id="CustId" [(ngModel)]="filterParams.CustId"
                        (change)="filterParams.CustName = ''">
                    <span matPrefix>CST</span>
                    <mat-icon matSuffix *ngIf="filterParams.CustId && filterParams.CustId.trim()"
                        class="clear-ipnut-icon" (click)="filterParams.CustId = ''">close</mat-icon>
                    <mat-hint>Search by Customer ID</mat-hint>
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <mat-label>Customer Name</mat-label>
                    <input matInput placeholder="Enter Customer Name" id="CustName" [(ngModel)]="filterParams.CustName"
                        (change)="filterParams.CustId = ''">
                    <mat-icon matSuffix *ngIf="filterParams.CustName && filterParams.CustName.trim()"
                        class="clear-ipnut-icon" (click)="filterParams.CustName = ''">close</mat-icon>
                    <mat-hint>Search by Customer Name</mat-hint>
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <mat-label>Payment Type</mat-label>
                    <mat-select [(value)]="filterParams.Type">
                        <mat-option value="">All</mat-option>
                        <mat-option value="1">Cheque</mat-option>
                        <mat-option value="2">Cash</mat-option>
                        <mat-option value="3">Cash and Cheque</mat-option>
                    </mat-select>
                    <mat-hint>Set the payment type</mat-hint>
                </mat-form-field>

                <mat-form-field color="primary" appearance="outline" class="date-picker">
                    <mat-label>Start Date</mat-label>
                    <input matInput [(ngModel)]="filterParams.From" [max]="filterParams.To" [matDatepicker]="picker1"
                        readonly>
                    <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
                    <mat-datepicker #picker1></mat-datepicker>
                    <mat-icon matSuffix class="clear-ipnut-icon" *ngIf="filterParams.From"
                        (click)="filterParams.From = ''">close</mat-icon>
                    <mat-hint>Payment start date</mat-hint>
                </mat-form-field>

                <mat-form-field color="primary" appearance="outline" class="date-picker">
                    <mat-label>End Date</mat-label>
                    <input matInput [(ngModel)]="filterParams.To" [min]="filterParams.From" [matDatepicker]="picker2"
                        readonly>
                    <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                    <mat-datepicker #picker2></mat-datepicker>
                    <mat-icon matSuffix class="clear-ipnut-icon" *ngIf="filterParams.To" (click)="filterParams.To = ''">
                        close</mat-icon>
                    <mat-hint>Payment end date</mat-hint>
                </mat-form-field>

                <div>
                    <mat-checkbox color="primary" [(ngModel)]="filterParams.IncludeDeleted">Include Deleted Customers
                    </mat-checkbox>
                </div>

                <div class="inline-flex-left">
                    <button mat-flat-button class="btn-reset" (click)="restFilter()">Reset</button>
                    <button mat-flat-button class="btn-filter" (click)="filter()">Filter</button>
                </div>

            </fieldset>
        </div>


    </div>

    <div class="dashboard-content-wrap">

        <div class="header">
            <p>Showing the list of Customers Payments</p>
            <small>You can Edit <mat-icon> edit </mat-icon> and view <mat-icon> remove_red_eye </mat-icon> Customer
                profile </small>
        </div>

        <div class="list">
            <table mat-table [dataSource]="dataSource">

                <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

                <ng-container matColumnDef="id">
                    <th mat-header-cell *matHeaderCellDef> ID </th>
                    <td mat-cell *matCellDef="let element"> <a [routerLink]="element.id"> PYT{{element.id}} </a> </td>
                </ng-container>

                <ng-container matColumnDef="date">
                    <th mat-header-cell *matHeaderCellDef> Date </th>
                    <td mat-cell *matCellDef="let element"> {{element.date | dateFormat}} </td>
                </ng-container>

                <ng-container matColumnDef="customer">
                    <th mat-header-cell *matHeaderCellDef> Customer </th>
                    <td mat-cell *matCellDef="let element"> <a [routerLink]="['/admin/customers/' + element.custId]">
                            {{element.customer}} </a> </td>
                </ng-container>

                <ng-container matColumnDef="paymentType">
                    <th mat-header-cell *matHeaderCellDef> Payment Type </th>
                    <td mat-cell *matCellDef="let element"> {{ element.paymentType | paymentTypeString }} </td>
                </ng-container>

                <ng-container matColumnDef="addedBy">
                    <th mat-header-cell *matHeaderCellDef> Added By </th>
                    <td mat-cell *matCellDef="let element"> {{element.addedBy}} </td>
                </ng-container>

                <ng-container matColumnDef="comment">
                    <th mat-header-cell *matHeaderCellDef> Comment </th>
                    <td mat-cell *matCellDef="let element"> {{element.comment}} </td>
                </ng-container>

                <ng-container matColumnDef="commands">
                    <th mat-header-cell *matHeaderCellDef> Commands </th>
                    <td mat-cell *matCellDef="let element" class="commands-column">
                        <mat-icon (click)="view(element.Id)"> remove_red_eye </mat-icon>
                        <mat-icon routerLink="{{element.id + '/edit'}}"> edit </mat-icon>
                    </td>
                </ng-container>

                <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
            </table>
        </div>

        <div>

            <mat-paginator [pageSizeOptions]="[10, 15, 20]" showFirstLastButtons></mat-paginator>
        </div>

    </div>

</div>